# [Project Sacho] 게임 기획 및 개발 요구사항 정의서 (PRD)

## 1. 프로젝트 개요 (Overview)
- 프로젝트명: 사초 (Sacho)
- 장르: 2.5D 사이버펑크 조선 액션 로그라이크
- 핵심 레퍼런스:
  - 하데스(Hades): 방 클리어 후 보상 선택, 랜덤 룸 생성
  - 스컬(Skul), 카타나 제로: 빠른 템포의 횡스크롤 액션
- 개발 엔진: Unity (2022 LTS 이상 권장)
- 타겟 플랫폼: PC (Steam)

## 2. 게임 구조 (Game Loop & Structure)

### 2.1. 핵심 루프 (Core Loop)
1) 로비(Base): 폐기물 처리장(최하층)에서 시작. 영구 업그레이드(스탯 강화) 및 무기 선택.
2) 전투(Run): 엘리베이터를 타고 층별 진입 -> 방(Room) 내 적 전멸.
3) 선택(Choice): 클리어 시 2~3개의 문이 활성화됨. 문 위에 표시된 보상(체력, 돈, 강화 칩)을 보고 다음 방 선택.
4) 보스(Boss): 각 계층(챕터)의 마지막에 보스전. 승리 시 다음 계층으로 이동.
5) 사망(Death): 획득한 일시적 버프/재화 소멸 -> 로비로 귀환(로그라이크 리셋).

### 2.2. 계층 구조 (Biomes)
게임은 지하에서 지상으로 올라가는 수직 구조를 가짐. (MVP 기준 1계층만 우선 구현)
- 1계층 (The Slums): 녹슨 철판과 네온사인이 뒤섞인 빈민가. (주적: 개조된 들개, 하급 포졸)
- 2계층 (The Market): 화려한 홀로그램이 가득한 저잣거리. (주적: 상인 로봇, 낭인)
- 3계층 (The Palace): 차가운 금속과 서버실로 이루어진 궁궐. (주적: 근위대, 최종 보스 연산)

## 3. 상세 시스템 기획 (System Mechanics)

### 3.1. 맵 생성 시스템 (Random Generation)
- 방(Room) 단위 로딩: 거대한 하나의 맵이 아님. 사전에 제작된 약 20개의 방 프리팹(Prefab)을 랜덤 순서로 불러옴.
- 보상 테이블:
  - 공격력 강화
  - 최대 체력 증가
  - 엽전(재화)
  - 상점 이용권
- 다음 방으로 넘어갈 때 난수(Random)에 의해 보상 종류가 결정됨.

### 3.2. 전투 시스템 (2.5D Action)
- 조작: 좌우 이동, 점프(2단), 대시(회피), 기본 공격, 스킬
- 타격감: 히트 스탑(Hit-stop, 타격 시 0.1초 멈춤), 화면 쉐이크, 피격 이펙트 필수
- 무기 시스템 (MVP):
  - 환도: 근거리, 빠른 3연타
  - 조총: 원거리, 쿨타임(장전) 존재, 반동

### 3.3. 데이터 관리 (Save/Load)
- 휘발성 데이터 (Run Data): 현재 체력, 현재 획득한 강화 칩, 현재 층수 (죽으면 삭제)
- 영구 데이터 (Meta Data): 해금된 무기 목록, 영구 강화된 스탯, 스토리 진행도 (죽어도 저장)

## 4. 개발자 요구사항 리스트 (Developer Requirements)
개발자(클라이언트 A, B)가 구현해야 할 구체적인 기능을 나열했습니다. 이를 바탕으로 지라/트렐로 티켓을 생성하세요.

### A. 메인 클라이언트 (Core Gameplay & Physics)
**Player Controller**
- Rigidbody2D 기반의 물리 이동 구현 (미끄러짐 방지 포함)
- 점프(Jump), 더블 점프, 대시(Dash - 무적 판정 포함) 로직
- 입력 버퍼(Input Buffer) 구현 (버튼 연타 시 씹힘 방지)

**Combat Engine**
- 히트박스(Hitbox) 시스템: 공격 판정(AttackBox)과 피격 판정(HurtBox) 분리
- 데미지 공식 적용: (플레이어 공격력 + 버프) - 적 방어력 = 최종 데미지
- 무기 교체(Weapon Swap) 구조 설계: 확장성을 고려한 인터페이스(IWeapon) 사용

**Camera**
- 플레이어 추적(Smooth Follow)
- 구역 제한(Confiner): 카메라가 맵 밖을 비추지 않도록 설정

### B. 서브 클라이언트 (System & AI)
**Dungeon Generator (핵심)**
- 방 연결 로직: 현재 방 클리어 -> 보상 선택 UI 팝업 -> 선택한 보상 타입에 맞춰 다음 씬(Scene) 로드
- 랜덤 로직: 방 리스트(List)에서 중복되지 않게 랜덤 추출하여 배치하는 알고리즘

**Enemy AI (FSM)**
- 상태 머신(Finite State Machine) 설계: Idle(대기) -> Chase(추적) -> Attack(공격) -> Hit(피격) -> Die(사망)
- 내비게이션(NavMesh 2D) 활용한 길 찾기

**Game Manager**
- 게임 상태 관리 (시작, 일시정지, 게임 오버, 승리)
- 데이터 매니저 (Json 등을 이용한 세이브/로드 기능)
- 오브젝트 풀링(Object Pooling): 탄환, 이펙트, 몬스터 재사용으로 최적화

### C. TA/아트 구현 (Technical Art - AI Asset)
**Background**
- AI 생성 배경 이미지를 3단 분리(원경/중경/근경)하여 Parallax(시차) 스크롤 적용
- 2.5D 느낌을 위한 3D 라이팅(Point Light) 배치 및 노멀맵 적용(선택 사항)

**Animation**
- AI가 생성한 캐릭터 스프라이트를 Unity 2D Animation 패키지로 리깅(Rigging)
- 기본 동작(Idle, Run, Attack) 애니메이션 클립 제작

## 5. 아트/디자인 파이프라인 (Asset Workflow)

### 기획
- 프롬프트 생성: "Cyberpunk Joseon warrior sprite sheet, white background..."
- 이미지 선별: 4방향 뷰가 아닌 측면(Side-view) 이미지를 최우선 확보

### TA
- 가공: 배경 제거(누끼)
- 해상도 업스케일링(Upscaling)
- 파츠 분리 (머리/몸통/팔/다리)

### 개발
- 엔진 적용: 프리팹(Prefab)화 하여 개발자에게 전달

## 6. MVP 개발 마일스톤 (1개월 목표)
- 1주차: 플레이어 이동/점프 및 기본 맵(네모 박스)에서 움직이기. 방 생성 로직 기초.
- 2주차: 기본 전투(공격/피격) 구현. 몬스터 AI 1종(추적).
- 3주차: 하데스식 방 이동 시스템(보상 선택) 구현. 아트 리소스 1차 적용.
- 4주차: 보스전 패턴 1종 구현 및 버그 수정. 빌드 배포.
